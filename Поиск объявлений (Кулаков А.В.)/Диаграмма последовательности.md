@startuml
actor Покупатель
participant "UI" as UI
participant "MessageBoardFacade" as Facade
participant "User" as User

Покупатель -> UI: Открывает каталог / карточку объявления
UI -> Facade: Search(query: String)
Facade --> UI: List<Advertisement>
UI --> Покупатель: Показывает объявления

loop Несколько добавлений
    Покупатель -> UI: Нажимает «Добавить в избранное»
    UI -> Facade: AddToFavorites(userId: uInt32, advertisementId: uInt32)

    Facade -> User: Users.favouritesIds.append(advertisementId)
    User -> Facade: OK
    Facade -> Facade: advertisments[advertisementId].Attach(userId)

    Facade --> UI: OK
    UI --> Покупатель: Подтверждения добавления
end

Покупатель -> UI: Переходит в раздел «Избранное»
UI -> Facade: GetFavorites(userId: uInt32)
Facade -> User: Users.favouritesIds.GetItems()
User-> Facade: advertismentIds
Facade -> Facade: advertisments.GetItemsBy(advertismentIds)
Facade --> UI: List<Advertisement>
UI --> Покупатель: Показывает список избранного
@enduml

