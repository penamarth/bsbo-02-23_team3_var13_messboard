# Рамки: Приложение электронной доски объявлений.

## Cценарий: Управление объявлением

## Уровень: Задача, определенная пользователем.

## Основной исполнитель: Зарегистрированный пользователь.

### Заинтересованные лица и их требования:

- Зарегистрированный пользователь:
  - Хочет быстро и легко создать объявление
  - Хочет редактировать объявление без потери видимости и позиций в поиске (при некритичных объявлениях)
  - Хочет удалять или скрывать объявление
  - Хочет управлять статусом объявления (активное, пауза, продано)

- Администратор:
  - Хочет обеспечить корректную модерацию и соответствие правилам платформы
  - Хочет предотвращать мошенничество и спам

- Компания:
  - Хочет максимизировать публикации качественных объявлений (для увеличения прибыли)
  - Хочет получать комиссию с продаж
  - Хочет иметь аналитические данные по жизненному циклу объявлений (для предсказания трендов)

### Предусловия:

- Пользователь авторизован в системе
- У пользователя есть подтвержденны контактные данные
- Система поддерживает категории, шаблоны форм и правила модерации

### Результаты (Постусловия):

- Объявление добавлено, отредактировано или удалено согласно действиям пользователя
- Пользователь видит актуальный статус объявления и может управлять им дальше (изменять, продлевать, активировать/деактивировать)

### Основной успешный сценарий:

1. Пользователь в профиле выбирает вкладку "Мои объявления"
2. Система обращается к базе данных и получает данные о существуюих объявлениях пользователя
3. Система отображает пользователю его объявления 
4. Пользователь нажимает на "Добавить объявление"
5. Система создаёт форму создания объявления (заголовок, описание, категория, цена, медиаконтент)
6. Система отображает созданную форму на новой странице
7. Пользователь заполняет форму, указывая все необходимые данные
8. Система валидирует данные (обязательные поля, требования к медиаконтенту, запрещенные слова/контент)
9. При успешной валидации система сохраняет объявление в базе данных со статусом "на модерации"
10. Система отправляет новое объявление на модерацию
11. Система пересылает пользователя на страницу с объявлениями 
12. Система обращается к базе данных для чтения информации об объявлениях пользователя
13. Система отображает пользователю его объявления
14. Пользователь видит обновлённый список объявлений

### Расширения (альтернативные потоки):

- Пользователь при необходимости выбирает опцию "Редактировать"
> 1. Система получает информацию об объявлении из базы данных и отображает форму с заполненными данными
> 2. Пользователь редактирует данные на форме
> 3. Система валидирует данные, сохраняет их в базе данных и отправляет их на модерацию
> 4. Система получает данные об объявлениях из базы данных
> 5. Пользователь видит обновлённое объявление в списке "Мои объявления"

- Пользователь при необходимости выбирает "Удалить"
> 1. Система получает информацию об объявлении из базы данных 
> 2. Система запрашивает подтверждение об удалении у пользователя
> 3. Система удаляет информацию об объявлении из базы данных
> 4. Система получает данные об объявлениях из базы данных
> 5. Пользователь видит оставшиеся объявления в списке "Мои объявления"

- Ошибка валидации при создании или редактировании:
> 1. Система подсвечивает некорректные поля и показывает сообщения об ошибках
> 2. Пользователь исправляет данные и повторяет сохранение

- Объявление требует ручной модерации:
> 1. Система сохраняет объявление в базе данных и устанавливает статус "на модерации"
> 2. Система скрывает объявление из поиска до проверки
> 3. Администратор утверждает/отклоняет объявление с указанием причин
> 4. Система отправляет уведомление пользователю о статусе модерации
> 5. Пользователь получает уведомление и может внести корректировки при отклонении

- Изменение критичных атрибутов (категория, цена, заголовок) может повлиять на ранжирование:
> 1. Система информирует пользователя о влиянии изменений на видимость

- Медиафайлы не проходят проверку (размер, формат, контент):
> 1. Система отклоняет соответствующие файлы и предлагает загрузить медиаконтент заново
> 2. Пользователь загружает корректные медиа

### Специальные требования:

- Интуитивная форма создания/редактирования с подсказками, предпросмотром и автосохранением черновика
- Валидация в реальном времени и понятные сообщения об ошибках
- Логирование истории изменений для валидации и модерации.
- Возможность черновиков
- Гибкая политика модерации: авто- и ручная проверка, фильтрация запрещенного контента
- Нотификации о статусе (модерация, опубликовано, отклонено, продлено, продано)
- Доступность интерфейса и поддержка мобильных устройств

### Список технологий и типов данных:

- Данные объявления: заголовок, описание, цена, местоположение, категория, параметры доставки/оплаты, контактные данные, фото/видео, теги, статус, даты
- Модерация: сервис проверки контента (ML/правила), антиспам/антифрод
- Медиа: сервис хранения и оптимизации изображений/видео, генерация превью
- Уведомления о смене статуса
- Аналитика: события CRUD, статусные переходы

### Частота использования:

- Добавление - средняя частота, пиковые нагрузки в сезоны распродаж
- Редактирование - высокая частота в первые дни после публикации
- Удаление - средняя частота по завершении сделки или истечении актуальности

### Открытые вопросы:
- Какие поля должны быть обязательными для разных категорий?
- Какой порог изменений требует повторной модерации?
- Какие лимиты по количеству активных объявлений и обновлений в сутки для одного пользователя?
- Поддерживать ли платные промо-опции (поднятие, закрепление, витрина) и как они взаимодействуют с редактированием?
- Разрешать ли восстановление удаленных объявлений и в течение какого срока?
- Нужны ли шаблоны и массовый импорт (CSV/API) для продавцов с большим инвентарем?
